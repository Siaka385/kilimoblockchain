<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farmer Dashboard</title>
    <link rel="stylesheet" href="static/dash.css">
    
</head>
<body>
    <div class="navbar">
        <button class="toggle-btn">&#9776;</button>
        <span>Welcome, John Doe</span>
        <button class="logout-btn">Log Out</button>
    </div>

    <div class="sidebar" id="sidebar">
        <a href="#" id="home-link">Home</a>
        <a href="#" id="products-link">My Products status</a>
        <a href="#" id="quality-link">Quality Survey</a>
        <a href="#" id="transactions-link">Transactions</a>
        <a href="#" id="market-link">Market Prices</a>
        <a href="#" id="profile-link">Profile</a>
        <a href="#" id="logout-link">Logout</a>
    </div>

    <div class="main-content">
        <!-- Home Page -->
        <div id="home-page" class="page-content active">
            <div class="quick-stats">
                <h2>Quick Stats</h2>
                <div>Total Products Registered: 10</div>
                <div>Pending Quality Survey: 2</div>
                <div>Approved Products: 7</div>
                <div>Rejected Products: 1</div>
                 <div>Products Delivered:2</div>
            </div>

            <div class="action-buttons">
                <h2>Actions</h2>
                <button>Register New Product</button>
                <button>View My Products</button>
                <button>Check Market Prices</button>
            </div>

            <div class="notifications">
                <h2>Notifications</h2>
                <ul>
                    <li>Tomato batch #789 quality survey completed</li>
                    <li>New price update for Wheat</li>
                </ul>
            </div>
        </div>

       <!-- My Products Page -->
<div id="products-page" class="page-content">
    <h2>My Products</h2>
    <div class="recent-activity">
        <h2>Recent Activity</h2>
        <table class="activity-table">
            <thead>
                <tr>
                    <th>Product Name</th>
                    <th>Batch Number</th>
                    <th>Quantity (in sacks)</th>
                    <th>Weight per Bag</th>
                    <th>Product Image</th>
                    <th>Method of sale</th>
                    <th>Price(ksh)</th>
                </tr>
            </thead>
            <tbody id="product-table-body">
                <tr>
                    <td>Tomato</td>
                    <td>#45556</td>
                    <td>50</td>
                    <td>20kg</td>
                    <td><img src="path-to-image1.jpg" alt="Tomato" width="50"></td>
                    <td>sale per kg</td>
                    <td>1000</td>
                </tr>
                <tr>
                    <td>Maize</td>
                    <td>#56660</td>
                    <td>60</td>
                    <td>10kg</td>
                    <td><img src="path-to-image2.jpg" alt="Maize" width="50"></td>
                    <td>sale per quantity</td>
                    <td>1000</td>
                </tr>
            </tbody>
        </table>
        <button id="add-product-btn">Add Product</button>
    </div>
</div>

<!-- Modal for Adding a New Product -->
<div id="add-product-modal" style="display:none;" class="Addproduct">
    <div class="modal-content">
        <h2>Add New Product</h2>
        <div class="content">
        
        <label for="product-name">Product Name:</label>
        <input type="text" id="product-name">
        
        <label for="batch-number">Batch Number:</label>
        <input type="text" id="batch-number">
        
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity">
        
        <label for="weight">Weight per Bag:</label>
        <input type="text" id="weight">

        <label for="saleMethod">Sale method:</label>
        <select required>
            <option>sale per kg</option>
            <option>sale per quantity</option>
        </select>
        
        <label for="Price">Price per weight(price per quantity):</label>
        <input type="number" id="Price">


        <label for="product-image">Product Image:</label>
        <input type="file" id="product-image">
        </div>
        <button id="save-product-btn">Save Product</button>
        <button id="cancel-btn">Cancel</button>
    </div>
</div>



        
       <!-- Quality Survey Page -->
<div id="quality-page" class="page-content">
    <h2>Quality Survey Status</h2>
    <div class="quality-survey">
        <table class="quality-table">
            <thead>
                <tr>
                    <th>Product Batch</th>
                    <th>Status</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Tomato batch #789</td>
                    <td>In Progress</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Wheat batch #456</td>
                    <td>Approved</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Potato batch #567</td>
                    <td>Rejected</td>
                    <td>High moisture content</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>


        <!-- Transactions Page -->
        <!-- Transactions Page -->
<div id="transactions-page" class="page-content">
    <h2>Transactions</h2>
    <div class="recent-activity">
        <h2>Recent Transactions</h2>
        <table class="transactions-table">
            <thead>
                <tr>
                    <th>Product Batch</th>
                    <th>Company</th>
                    <th>Amount (Ksh)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Wheat batch #456</td>
                    <td>XYZ Company</td>
                    <td>150,000</td>
                </tr>
                <tr>
                    <td>Maize batch #123</td>
                    <td>ABC Company</td>
                    <td>100,000</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Market Prices Page -->
<div id="market-page" class="page-content">
    <h2>Market Prices</h2>
    <div class="market-insights">
        <table class="market-table">
            <thead>
                <tr>
                    <th>Crop</th>
                    <th>Price (Ksh/ton)</th>
                    <th>Trend</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Maize</td>
                    <td>3000</td>
                    <td class="price-trend up">⬆</td>
                </tr>
                <tr>
                    <td>Wheat</td>
                    <td>3500</td>
                    <td class="price-trend down">⬇</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div id="profile-page" class="page-content">
    <h2 id="title">About</h2>
    <div class="section">
        <h3>Personal Information</h3>
        <p>Name: <strong id="name" >John Doe</strong></p>
        <p>Email: <strong id="email">johndoe@gmail.com</strong></p>
        <p>Phone number: <strong id="phonenumber">07123456</strong></p>
        <p>Location: <strong id="location">Kisumu</strong></p>
        <button class="edit-button" id="profilebtn">Edit Personal Info</button>
    </div>

    <div class="section">
        <h3>Farm Information</h3>
        <p>Farm Name: <strong id="farmname">Green Valley Farms</strong></p>
        <p>Farm Size: <strong id="farmsize">50 acres</strong></p>
        <p>Type of Products: <strong id="products">Maize, Beans, Dairy</strong></p>
        <p>Years of Experience: <strong id="Experience">15 years</strong></p>
        <button class="edit-button" id="farmbtn">Edit Farm Info</button>
    </div>

    <div class="section">
        <h3>Banking and Payment Info</h3>
        <div id="paymentcontainer">
            <div id="payment" class="payments">
        <p>Preferred Payment Method: <strong id="paymentmethod">Mobile Money (M-Pesa)</strong></p>
        <p>PayBill: <strong id="PayBill">522533</strong></p>
        <p>Account number: <strong id="Account">123</strong></p>
            </div>
        <button class="edit-button" id="editBankMethod">Edit Banking Info</button>
        <button class="edit-button"  id="addbankmethod">Add another payment method</button>
        </div>
    </div>

    <div class="section">
        <h3>Social Media</h3>
        <p>Facebook: <a href="https://facebook.com/johndoe" target="_blank"><strong>facebook.com/johndoe</strong></a></p>
        <p>Twitter: <a href="https://twitter.com/johndoe" target="_blank"><strong>@johndoe</strong></a></p>
        <p>Instagram: <a href="https://instagram.com/johndoe" target="_blank"><strong>@johndoe</strong></a></p>
        <button class="edit-button">Edit Social Media</button>
    </div>


<!--EDIT PROFILE PERSONAL INFO-->
<div class="form-container" style="display: none;" id="profileeditor">
    <h2>Personal Information</h2>
    <form>
        <div class="form-group">
            <label for="profile-pic">Profile Picture</label>
            <input type="file" id="profile-pic" accept="image/*">
            <img id="profile-pic-preview" src="" alt="Profile Picture Preview" style="display:none;">
        </div>
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="editname" name="name" placeholder="Enter your name" required>
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="editemail" name="email" placeholder="Enter your email" required>
        </div>
        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="editphone" name="phone" placeholder="Enter your phone number" required>
        </div>
        <div class="form-group">
            <label for="location">Location</label>
            <input type="text" id="editlocation" name="location" placeholder="Enter your county's name" required>
        </div>
    </form>
    <div class="button-group">
        <button type="button"  class="save-button" id="saveprofilebtn">Save</button>
        <button type="button" class="cancel-button">Cancel</button>
    </div>
</div>


<!---EDIT FARM INFO-->
<div class="form-container" style="display: none;" id="farm-editor">
    <h2>Edit Farm Information</h2>
    <form>
        <div class="form-group">
            <label for="farm-name">Farm Name</label>
            <input type="text" id="editfarmname" name="farmname" placeholder="Enter farm name" required>
        </div>
        <div class="form-group">
            <label for="farm-size">Farm Size</label>
            <input type="text" id="editfarmsize" name="farmsize" placeholder="Enter farm size (e.g., 50 acres)" required>
        </div>
        <div class="form-group">
            <label for="farm-products">Type of Products</label>
            <input type="text" id="editproducts" name="products" placeholder="Enter type of products (e.g., Maize, Beans, Dairy)" required>
        </div>
        <div class="form-group">
            <label for="years-experience">Years of Experience</label>
            <input type="number" id="editexperience" name="experience" placeholder="Enter years of experience" required>
        </div>
    </form>
    <div class="button-group">
        <button type="button" class="save-button" id="savefarmbtn">Save</button>
        <button type="button" class="cancel-button" id="cancelfarmbtn">Cancel</button>
    </div>
</div>


<!--EDIT PAYMENT METHOD-->
<div class="form-container" style="display: none;" id="bank-editor">
    <h2>Edit Banking and Payment Info</h2>
    <form>
        <div class="form-group">
            <label for="payment-method">Preferred Payment Method</label>
            <input type="text" id="editpaymentmethod" name="paymentmethod" placeholder="Enter payment method" required>
        </div>
        <div class="form-group">
            <label for="paybill">PayBill</label>
            <input type="text" id="editPayBill" name="paybill" placeholder="Enter PayBill number" required>
        </div>
        <div class="form-group">
            <label for="account-number">Account Number</label>
            <input type="text" id="editAccount" name="accountnumber" placeholder="Enter account number" required>
        </div>
    </form>
    <div class="button-group">
        <button type="button" class="save-button" id="saveBankBtn">Save</button>
        <button type="button" class="cancel-button" id="cancelBankBtn">Cancel</button>
    </div>
</div>

<div class="form-container" style="display: none;" id="bank-adder">
    <h2>Add Another Payment Method</h2>
    <form>
        <div class="form-group">
            <label for="new-payment-method">Payment Method</label>
            <input type="text" id="newpaymentmethod" name="newpaymentmethod" placeholder="Enter new payment method" required>
        </div>
        <div class="form-group">
            <label for="new-paybill">PayBill</label>
            <input type="text" id="newPayBill" name="newpaybill" placeholder="Enter new PayBill number" required>
        </div>
        <div class="form-group">
            <label for="new-account-number">Account Number</label>
            <input type="text" id="newAccount" name="newaccountnumber" placeholder="Enter new account number" required>
        </div>
    </form>
    <div class="button-group">
        <button type="button" class="save-button" id="saveNewBankBtn">Save</button>
        <button type="button" class="cancel-button" id="cancelNewBankBtn">Cancel</button>
    </div>
</div>



</div>



    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toggleBtn = document.querySelector('.toggle-btn');
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.querySelector('.main-content');

            const pageLinks = document.querySelectorAll('.sidebar a');
            const pages = document.querySelectorAll('.page-content');

            // Toggle sidebar
            toggleBtn.addEventListener('click', function() {
                sidebar.classList.toggle('open');
            });

            // Close sidebar when clicking outside of it
            mainContent.addEventListener('click', function() {
                if (sidebar.classList.contains('open')) {
                    sidebar.classList.remove('open');
                }
            });

            // Handle page navigation
            pageLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetPage = e.target.id.replace('-link', '-page');

                    // Hide all pages
                    pages.forEach(page => {
                        page.classList.remove('active');
                    });

                    // Show the target page
                    document.getElementById(targetPage).classList.add('active');
                });
            });



            /**************************************************
             * PROFILE PAGE
             *******************/
 document.getElementById('profilebtn').addEventListener('click', function() {
    // Hide text elements and show input fields
    var hides = document.querySelectorAll('.section');
    document.getElementById("title").textContent = "Profile Edit";
    
    hides.forEach(function(item) {
        item.style.display = 'none';
    });
    
    // Hide edit button and show save button
    document.getElementById('profilebtn').style.display = 'none';
    document.getElementById('profileeditor').style.display = 'block';
    document.getElementById('editname').value = document.getElementById('name').textContent;
    document.getElementById('editemail').value = document.getElementById('email').textContent;
    document.getElementById('editphone').value = document.getElementById('phonenumber').textContent;
    document.getElementById('editlocation').value = document.getElementById('location').textContent;
});


    // profilePicInput.addEventListener('change', function() {
    //      const file = this.files[0];
    //      if (file) {
    //      const reader = new FileReader();
    //          reader.onload = function(e) {
    //              profilePicPreview.src = e.target.result;
    //             profilePicPreview.style.display = 'block';
    //          }
    //         reader.readAsDataURL(file);
    //     } else {
    //          profilePicPreview.style.display = 'none';
    //     }
    //  });

document.getElementById('saveprofilebtn').addEventListener('click', function(event) {
    // Prevent the default form submission
    event.preventDefault();

    //fetch start
   
    // Create a FormData object from the form
    /*
    const formData = new FormData(this);

    // Send the form data using fetch
    fetch('/your-endpoint', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        if (response.ok) {
            return response.json(); // Assuming server responds with JSON
        }
        throw new Error('Network response was not ok.');
    })
    .then(data => {
        // Handle the response data if needed
        console.log('Success:', data);
        // You can add code here to update the UI or show a success message
    })
    .catch(error => {
        // Handle errors
        console.error('Error:', error);
    });


*/
    //end of fetch

    // Hide the profile editor form
    document.getElementById('profileeditor').style.display = 'none';
    
    // Show the profile sections
    var hides = document.querySelectorAll('.section');
    document.getElementById("title").textContent = "About";
    
    hides.forEach(function(item) {
        item.style.display = 'block';
    });
    
    // Update the profile information with the edited values
    document.getElementById('name').textContent = document.getElementById('editname').value;
    document.getElementById('email').textContent = document.getElementById('editemail').value;
    document.getElementById('phonenumber').textContent = document.getElementById('editphone').value;
    document.getElementById('location').textContent = document.getElementById('editlocation').value;
    
    // Show the edit button
    document.getElementById('profilebtn').style.display = 'inline-block';
});
/***********************************
 * END OF PROFILE EDIT
 * 
 * *******************/

/****************************************************
 * EDIT FARM INPUT
 * ***********************************************/
document.getElementById("farmbtn").addEventListener("click",function(){

 // Hide the current section and show the farm editor form
 document.querySelectorAll('.section').forEach(function(item) {
        item.style.display = 'none';
    });
    document.getElementById("title").textContent = "Edit Farm Information";
    document.getElementById('farm-editor').style.display = 'block';

    // Populate the form with the existing farm details
    document.getElementById('editfarmname').value = document.getElementById('farmname').textContent;
    document.getElementById('editfarmsize').value = document.getElementById('farmsize').textContent;
    document.getElementById('editproducts').value = document.getElementById('products').textContent;
    document.getElementById('editexperience').value = document.getElementById('Experience').textContent;
})
document.getElementById("savefarmbtn").addEventListener("click",function(event){

 // Prevent default form submission
 event.preventDefault();

// const farm=new farmdetails(this) 

// fetch("/endpoint",{
//     method:"POST",
//     body:farm
// }).then(response=>{
//     if(response.ok){
//         response.json()
//     }
//     throw new Error('Network response was not ok.');
// }).then(data => {
//         // Handle the response data if needed
//         console.log('Success:', data);
//         // You can add code here to update the UI or show a success message
//     })
//     .catch(error => {
//         // Handle errors
//         console.error('Error:', error);
//     });


// Hide the farm editor form and show the sections again
document.getElementById('farm-editor').style.display = 'none';

document.querySelectorAll('.section').forEach(function(item) {
    item.style.display = 'block';
});
document.getElementById("title").textContent = "About";

// Update the farm information with the edited values
document.getElementById('farmname').textContent = document.getElementById('editfarmname').value;
document.getElementById('farmsize').textContent = document.getElementById('editfarmsize').value;
document.getElementById('products').textContent = document.getElementById('editproducts').value;
document.getElementById('Experience').textContent = document.getElementById('editexperience').value;
})



document.getElementById('cancelfarmbtn').addEventListener('click', function() {
    // Hide the farm editor form and show the sections again
    document.getElementById('farm-editor').style.display = 'none';
    document.querySelectorAll('.section').forEach(function(item) {
        item.style.display = 'block';
    });
    document.getElementById("title").textContent = "About";
});

/*******************************
 * END OF FARM INPUT
 * *************************/


 /**************
  * 
  * BANK DETAILS
  * **************/
 // Handle editing the current payment method
document.getElementById('editBankMethod').addEventListener('click', function() {
    // Hide the current section and show the bank editor form
    document.querySelectorAll('.section').forEach(function(item) {
        item.style.display = 'none';
    });
    document.getElementById("title").textContent = "Edit Banking and Payment Info";
    document.getElementById('bank-editor').style.display = 'block';

    // Populate the form with the existing payment details
    document.getElementById('editpaymentmethod').value = document.getElementById('paymentmethod').textContent;
    document.getElementById('editPayBill').value = document.getElementById('PayBill').textContent;
    document.getElementById('editAccount').value = document.getElementById('Account').textContent;
});

// Handle saving the edited payment method
document.getElementById('saveBankBtn').addEventListener('click', function(event) {
    // Prevent default form submission
    event.preventDefault();

    // Hide the bank editor form and show the sections again
    document.getElementById('bank-editor').style.display = 'none';
    document.querySelectorAll('.section').forEach(function(item) {
        item.style.display = 'block';
    });
    document.getElementById("title").textContent = "About";

    // Update the payment information with the edited values
    document.getElementById('paymentmethod').textContent = document.getElementById('editpaymentmethod').value;
    document.getElementById('PayBill').textContent = document.getElementById('editPayBill').value;
    document.getElementById('Account').textContent = document.getElementById('editAccount').value;
});

// Handle adding a new payment method
document.getElementById('addbankmethod').addEventListener('click', function() {
    // Hide the current section and show the bank adder form
    document.querySelectorAll('.section').forEach(function(item) {
        item.style.display = 'none';
    });
    document.getElementById("title").textContent = "Add Another Payment Method";
    document.getElementById('bank-adder').style.display = 'block';
});

// Handle saving the new payment method
document.getElementById('saveNewBankBtn').addEventListener('click', function(event) {
    // Prevent default form submission
    event.preventDefault();

    // Hide the bank adder form and show the sections again
    document.getElementById('bank-adder').style.display = 'none';
    document.querySelectorAll('.section').forEach(function(item) {
        item.style.display = 'block';
    });
    document.getElementById("title").textContent = "About";

    // Optionally, you can add the new payment method details to a list or elsewhere on the page
    // Example:
    const newMethod = document.createElement('p');
    newMethod.innerHTML = `Payment Method: <strong>${document.getElementById('newpaymentmethod').value}</strong><br>
                           PayBill: <strong>${document.getElementById('newPayBill').value}</strong><br>
                           Account Number: <strong>${document.getElementById('newAccount').value}</strong>`;
    document.querySelector('.section').appendChild(newMethod);
});

// Handle canceling the editing or adding process
document.getElementById('cancelBankBtn').addEventListener('click', function() {
    document.getElementById('bank-editor').style.display = 'none';
    document.querySelectorAll('.section').forEach(function(item) {
        item.style.display = 'block';
    });
    document.getElementById("title").textContent = "About";
});

document.getElementById('cancelNewBankBtn').addEventListener('click', function() {
    document.getElementById('bank-adder').style.display = 'none';
    document.querySelectorAll('.section').forEach(function(item) {
        item.style.display = 'block';
    });
    document.getElementById("title").textContent = "About";
});

/**************
 * END OF BANK DETAAILS
 * ******************/

 




            document.getElementById('add-product-btn').addEventListener('click', function() {
                //hide it
                document.getElementById('products-page').style.display='none'
                // Show the modal
                document.getElementById('add-product-modal').style.display = 'block';
            });
            
            document.getElementById('cancel-btn').addEventListener('click', function() {
                // Hide the modal
                document.getElementById('add-product-modal').style.display = 'none';
                //show products
                document.getElementById('products-page').style.display='block';
            });
            
            document.getElementById('save-product-btn').addEventListener('click', function() {
                // Get input values
                const productName = document.getElementById('product-name').value;
                const batchNumber = document.getElementById('batch-number').value;
                const quantity = document.getElementById('quantity').value;
                const weight = document.getElementById('weight').value;
                const productImage = document.getElementById('product-image').files[0];
            
                // Validate inputs
                if (!productName || !batchNumber || !quantity || !weight || !productImage) {
                    alert('Please fill in all fields and select an image.');
                    return;
                }
            
                // Create a new table row
                const newRow = document.createElement('tr');
            
                // Add product data to the row
                newRow.innerHTML = `
                    <td>${productName}</td>
                    <td>${batchNumber}</td>
                    <td>${quantity}</td>
                    <td>${weight}</td>
                    <td><img src="${URL.createObjectURL(productImage)}" alt="${productName}" width="50"></td>
                `;
            
                // Append the new row to the table body
                document.getElementById('product-table-body').appendChild(newRow);
            
                // Hide the modal
                document.getElementById('add-product-modal').style.display = 'none';
            
                // Clear the input fields
                document.getElementById('product-name').value = '';
                document.getElementById('batch-number').value = '';
                document.getElementById('quantity').value = '';
                document.getElementById('weight').value = '';
                document.getElementById('product-image').value = '';
            });
            
            
        });
    </script>
</body>
</html>
